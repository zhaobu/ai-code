# 项目架构说明

## 项目结构
```
src/
├── common/          # 公共模块
│   ├── colors.py    # 颜色常量定义
│   └── utils.py     # 通用工具函数
├── game_modules/    # 游戏模块
│   ├── sokoban/     # 推箱子游戏
│   ├── gomoku/      # 五子棋游戏
│   └── ...
└── main.py         # 主程序入口
```

## 模块设计

### 1. 公共模块 (common)
- colors.py：定义游戏中使用的颜色常量
- utils.py：提供通用的工具函数和辅助方法

### 2. 游戏模块
每个游戏模块都遵循以下结构：
- game.py：游戏主逻辑类
- images/：游戏资源文件夹（可选）
- 其他特定游戏相关的文件

### 3. 游戏类设计规范
每个游戏类应包含以下基本方法：
- __init__：初始化游戏状态和资源
- run：游戏主循环
- draw：绘制游戏画面
- handle_events：处理用户输入
- reset：重置游戏状态

## 开发指南

### 1. 添加新游戏
1. 在src目录下创建新的游戏模块文件夹
2. 实现游戏主类，继承基本的游戏方法
3. 在main.py中注册新游戏
4. 添加游戏文档

### 2. 代码规范
- 使用Python类型注解
- 遵循PEP 8编码规范
- 使用black进行代码格式化
- 为主要函数添加文档字符串

### 3. 资源管理
- 图片资源放置在游戏模块的images目录下
- 使用相对路径加载资源文件
- 在游戏退出时释放资源

### 4. 性能优化
- 使用精灵组管理游戏对象
- 优化绘制操作，避免不必要的重绘
- 合理使用事件处理，避免过度轮询

### 5. 错误处理
- 使用异常处理机制捕获可能的错误
- 提供友好的错误提示
- 保证游戏在出错时能够优雅退出

## 依赖管理
- 使用Poetry管理项目依赖
- 在pyproject.toml中声明依赖项
- 使用虚拟环境隔离开发环境

## 测试规范
1. 单元测试
   - 使用pytest编写测试用例
   - 测试游戏核心逻辑
   - 模拟用户输入进行测试

2. 集成测试
   - 测试游戏完整流程
   - 验证游戏状态转换
   - 检查资源加载和释放

## 版本控制
- 使用Git进行版本控制
- 遵循语义化版本规范
- 保持提交信息清晰明确

## 发布流程
1. 更新版本号
2. 更新更新日志
3. 运行测试套件
4. 构建发布包
5. 更新文档

## 维护建议
1. 定期更新依赖包
2. 及时修复已知问题
3. 持续改进游戏体验
4. 保持代码质量